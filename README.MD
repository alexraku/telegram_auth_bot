# Telegram Auth Bot

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞ —Å REST API, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å—Ç–µ–∫–µ FastAPI, Aiogram, PostgreSQL –∏ Redis.

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **FastAPI** ‚Äî backend –∏ REST API —Å–µ—Ä–≤–µ—Ä.
- **Aiogram** ‚Äî Telegram-–±–æ—Ç (Python).
- **PostgreSQL** ‚Äî –°–£–ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.
- **Redis** ‚Äî –∫–µ—à –∏ –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π/—Å–æ—Å—Ç–æ—è–Ω–∏–π.
- **Docker/Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π.
- **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
- REST API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
   ```
   git clone git@github.com:alexraku/telegram_auth_bot.git
   cd telegram_auth_bot
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (–µ—Å–ª–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –±–µ–∑ Docker):
   ```
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**  
   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ –æ–±—Ä–∞–∑—Ü—É `.env.example`:

   ```
   DB_HOST=postgres
   DB_PORT=5432
   DB_USER=app
   DB_PASSWORD=your_password
   DB_NAME=auth_db

   REDIS_HOST=redis
   REDIS_PORT=6379

   TELEGRAM_BOT_TOKEN=your_telegram_bot_token

   SECRET_KEY=your_secret_key
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-–±–æ—Ç–∞**  
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —É [BotFather](https://t.me/BotFather)
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ –≤ `TELEGRAM_BOT_TOKEN`

---

## üê≥ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ Docker Compose

```
docker-compose up --build
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- FastAPI REST API –Ω–∞ `http://localhost:8000`
- PostgreSQL –∏ Redis —Å—Ç–∞—Ä—Ç—É—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:**
```
docker-compose exec backend alembic upgrade head
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –¢–µ—Å—Ç—ã —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ –ø–∞–ø–∫–µ `tests/`
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
  ```
  pytest
  ```
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–¥–Ω—è—Ç—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω —Ñ–∞–π–ª `.env.test`

---

## ‚èØ –ó–∞–ø—É—Å–∫ –≤ production

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, Docker Secrets).
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ volumes –¥–ª—è –ë–î –∏ Redis.
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy (nginx, traefik) –∏ HTTPS.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ c –ø–æ–º–æ—â—å—é docker-compose –∏–ª–∏ –Ω–∞ Kubernetes.
5. –ù–µ –∑–∞–±—É–¥—å—Ç–µ:
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏:  
     `alembic upgrade head`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:  
  `http://localhost:8000/docs` (Swagger)
- –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - `/auth/request/` ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram
  - `/auth/confirm/` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–±–æ—Ç)
  - `/users/` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üõ† –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

- –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏ backend –∏ –±–æ—Ç–∞ (docker-compose logs)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `.env` –∏ —Ç–æ–∫–µ–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Postman –∏–ª–∏ curl –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ API

---

## üõ° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ SECRET_KEY –∏ TELEGRAM_BOT_TOKEN
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –û–≥—Ä–∞–Ω–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ API –ø–æ IP –∏–ª–∏ —á–µ—Ä–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ê–≤—Ç–æ—Ä: [alexraku](https://github.com/alexraku)  
Pull Requests –∏ Issues –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

---

**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT
```

–í—ã–¥–µ–ª–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `README.md` –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞!

–ò—Å—Ç–æ—á–Ω–∏–∫–∏


